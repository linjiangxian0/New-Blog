layout: post
title: Pyenv介绍
published: true
comments: true
sharing: true
footer: true
categories: [效率]
tags: [pyenv, python]
date: 2018-02-27 12:57:55
keywords: python, pyenv
---

![python 2 vs python 3](/images/blog/python-2-vs-python-3.jpg)

去年 11 月，[Numpy](http://www.numpy.org/)团队的一份声明引发了`Python`社区的关注：这一科学计算库即将放弃对于 `Python 2.7` 的支持，全面转向`Python 3`。

> 声明原文[Plan for dropping Python 2.7 support](https://github.com/numpy/numpy/blob/master/doc/neps/dropping-python2.7-proposal.rst)

<!-- more -->

不过，还是有很多`Python`的项目依然还是使用`2.7`的版本来进行开发和维护。尤其是我这种喜欢折腾新东西的人来说，一门语言同时在一个系统中存在多个版本是一个非常正常的事情。也经常有同学来问我`Python`不同版本之间兼容和切换的问题。

今天给大家推荐一下`Python`环境管理的工具，简单整理一下`pyenv`相关的介绍和使用。

`pyenv`是一个非常好用的`Python`环境管理工具。

有这些主要特性：

1. 方便的安装、管理不同版本的`Python`，而且不需要`sudo`权限，不会污染系统的`Python`版本
1. 可以修改当前用户使用的默认`Python`版本
1. 集成`virtualenv`，自动安装、激活
1. 命令行自动补全

详细内容见 [Github - pyenv/pyenv](https://github.com/pyenv/pyenv).

# 安装pyenv

使用[pyenv-installer](https://github.com/pyenv/pyenv-installer)

```http
curl -L https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer | bash
```
然后在`~/.bashrc`或`~/.zshrc`中添加如下内容：

```bash
export PATH="~/.pyenv/bin:$PATH"
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)"
```

`macOS`用户可以直接使用`brew`这个包管理系统直接安装`pyenv`，直接完成上述两步操作。

```bash
brew install pyenv
```

# 常用命令

完整的命令行列表可以参考[pyenv/COMMANDS.md](https://github.com/pyenv/pyenv/blob/master/COMMANDS.md).

## 安装`Python`

```bash
pyenv install 3.6.1
```

这个命令会为当前用户下载和安装`Python 3.6.1`。

## 新建虚拟环境

```bash
pyenv virtualenv 3.6.1 py36
```

设置当前路径使用的 Python 环境

```bash
pyenv local py36
```

这个命令会在当前路径创建一个`.python-version`文件，文件内容就是 `py36`，即环境名称。所以一般需要把`.python-version`添加到 `.gitignore`.

下次进入该目录时，会自动激活虚拟环境，离开后自动退出。

# 附录

1. [在Python 2.7即将停止支持时，我们为你准备了一份3.x迁移指南](https://www.jiqizhixin.com/articles/2018-01-29-3)
